<html>
  <head>
	<title>ミリシタ　オファーテキスト分析</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis-network.min.css" rel="stylesheet">
    <style type="text/css">
      #network {
        width:  80%;
        height: 80%;

        float: left;
        margin: 10px;
      }
      #settings {
        float: left;
      }
      #informations {
          clear:both;
          font-size: small;
      }
    </style>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis-network.min.js"></script>
  </head>
  <body onload="draw()">
      <h1>ミリシタ　オファーテキスト分析</h1>

      <ul>
          <li>ミリシタのオファーテキストを分析し、アイドル達がどのような言葉を使う傾向があるのかを可視化しました。</li>
      </ul>

      <div id="network"></div>

      <div id="settings">
          表示ON/OFF
          <ul>
              <li><input type="checkbox" name="checkbox" value="P" onChange="onChangeCheckbox(this.value);"
                      checked>Princess</li>
              <li><input type="checkbox" name="checkbox" value="F" onChange="onChangeCheckbox(this.value);"
                      checked>Fairy</li>
              <li><input type="checkbox" name="checkbox" value="A" onChange="onChangeCheckbox(this.value);"
                      checked>Angel</li>
              <li><input type="checkbox" name="checkbox" value="text" onChange="onChangeCheckbox(this.value);"
                      checked>抽出語句</li>
              <li><input type="checkbox" name="checkbox" value="label" onChange="onChangeCheckbox(this.value);"
                      checked>アイドル名</li>
          </ul>
      </div>


      <div id="informations">
          <ul>解析方法
              <li>アイドルごとのオファーテキストをKH Coderで処理し、抽出語を対応分析で表示</li>
              <li>台詞に含まれる「名詞」は外的要因に影響されると考えられる。今回はアイドルの内面を評価するため「名詞」は解析対象から外した。具体的には以下の品詞を対象として解析を実施した。：形容動詞、ナイ形容、副詞可能、感動詞、動詞、形容詞、副詞、形容詞B、副詞B、否定助動詞、形容詞(非自立)
              </li>
          </ul>
          <ul>謝辞
              <li>オファーテキストはサブメガネP様が作成されたデータを使用させていただきました。ありがとうございます。</li>
          </ul>
      </div>
    <script type="text/javascript">
    let network = null;
    let options = {
        nodes: {
          shape: 'dot',

        },
        groups:{
            'text':{'shape': 'dot', 'size':5,'color': '#000000', 'font':{'size': 20, 'strokeWidth':4}, 'fixed': {'x':true, 'y':true}, 'physics':false},
            'P': {'shape': 'square', 'size':12,'color': '#FF2284', 'fixed': {'x':true, 'y':true}, 'physics':false},
            'F': {'shape': 'square', 'size':12,'color': '#005EFF', 'fixed': {'x':true, 'y':true}, 'physics':false},
            'A': {'shape': 'square', 'size':12,'color': '#FFBB00', 'fixed': {'x':true, 'y':true}, 'physics':false},
            'idolP': {'shape': 'star', 'size':10, 'font':{'size': 30, 'strokeWidth':8}},
            'idolF': {'shape': 'star', 'size':10, 'font':{'size': 30, 'strokeWidth':8}},
            'idolA': {'shape': 'star', 'size':10, 'font':{'size': 30, 'strokeWidth':8}},
      },
    };

    function draw() {
      // create people.
      // value corresponds with the age of the person
      const nodes = [{'group': 'text',
  'id': 1,
  'label': '上手',
  'x': 216.3329151,
  'y': -346.06024709999997},
 {'group': 'text',
  'id': 2,
  'label': '素敵',
  'x': -777.0057290999999,
  'y': 435.7303761},
 {'group': 'text',
  'id': 3,
  'label': '今日',
  'x': 161.28964409999998,
  'y': -194.91905609999998},
 {'group': 'text',
  'id': 4,
  'label': 'たくさん',
  'x': -140.0068866,
  'y': 519.2469039},
 {'group': 'text',
  'id': 5,
  'label': '今度',
  'x': 42.6381516,
  'y': 343.04554049999996},
 {'group': 'text',
  'id': 6,
  'label': '途中',
  'x': 192.90635220000001,
  'y': -114.55515840000001},
 {'group': 'text', 'id': 7, 'label': 'あ', 'x': -123.4017723, 'y': 54.7611597},
 {'group': 'text',
  'id': 8,
  'label': 'う',
  'x': -161.4971001,
  'y': -480.81353550000006},
 {'group': 'text',
  'id': 9,
  'label': '言う',
  'x': 77.1043056,
  'y': 16.410582299999998},
 {'group': 'text',
  'id': 10,
  'label': '思う',
  'x': -204.81969030000002,
  'y': -50.7428424},
 {'group': 'text',
  'id': 11,
  'label': '行く',
  'x': 76.68459150000001,
  'y': 244.9608252},
 {'group': 'text', 'id': 12, 'label': '出る', 'x': 258.5544291, 'y': 159.433812},
 {'group': 'text',
  'id': 13,
  'label': '見る',
  'x': -79.2445407,
  'y': 18.450668999999998},
 {'group': 'text',
  'id': 14,
  'label': '聞く',
  'x': -72.97428120000001,
  'y': 86.2451061},
 {'group': 'text',
  'id': 15,
  'label': '歌う',
  'x': 232.17810659999998,
  'y': -2.3777973},
 {'group': 'text',
  'id': 16,
  'label': '食べる',
  'x': 392.2604916,
  'y': 153.74217209999998},
 {'group': 'text',
  'id': 17,
  'label': '教える',
  'x': 181.1361972,
  'y': 646.2128694},
 {'group': 'text',
  'id': 18,
  'label': '頑張る',
  'x': -170.8537188,
  'y': -386.5971093},
 {'group': 'text',
  'id': 19,
  'label': '終わる',
  'x': 18.1417401,
  'y': -311.30830319999995},
 {'group': 'text', 'id': 20, 'label': '話す', 'x': 32.3728653, 'y': -116.9420112},
 {'group': 'text',
  'id': 21,
  'label': '知る',
  'x': 140.12128859999999,
  'y': 50.5856868},
 {'group': 'text', 'id': 22, 'label': '楽しい', 'x': 76.1723538, 'y': 329.105787},
 {'group': 'text', 'id': 23, 'label': '可愛い', 'x': 4.0129113, 'y': -81.9766128},
 {'group': 'text',
  'id': 24,
  'label': '本当に',
  'x': -140.0103837,
  'y': -240.7921266},
 {'group': 'text',
  'id': 25,
  'label': 'すごい',
  'x': -32.7808182,
  'y': -133.1213601},
 {'group': 'text', 'id': 26, 'label': 'いい', 'x': 232.3787274, 'y': -0.1469565},
 {'group': 'text',
  'id': 27,
  'label': 'ない',
  'x': 61.775246100000004,
  'y': -396.86393519999996},
 {'group': 'text',
  'id': 28,
  'label': 'かわいい',
  'x': 265.4380008,
  'y': -91.0759221},
 {'group': 'text',
  'id': 29,
  'label': 'よい',
  'x': 119.499459,
  'y': 97.10831309999999},
 {'group': 'text', 'id': 30, 'label': 'ごく', 'x': 633.4278936, 'y': 542.0391615},
 {'group': 'text',
  'id': 31,
  'label': 'とても',
  'x': -1103.2102476,
  'y': 212.2185081},
 {'group': 'text',
  'id': 32,
  'label': 'とっても',
  'x': -433.20398579999994,
  'y': 812.0824611},
 {'group': 'text',
  'id': 33,
  'label': 'ちょっと',
  'x': 273.3071559,
  'y': -331.92072989999997},
 {'group': 'text',
  'id': 34,
  'label': 'さすが',
  'x': 9.248952599999999,
  'y': -477.43101090000005},
 {'group': 'text',
  'id': 35,
  'label': 'いっぱい',
  'x': 500.65873139999997,
  'y': 349.0316679},
 {'group': 'text',
  'id': 36,
  'label': 'ちゃんと',
  'x': 232.23470279999998,
  'y': -420.0631566},
 {'group': 'text',
  'id': 37,
  'label': 'いつも',
  'x': 38.5619331,
  'y': -63.469916399999995},
 {'group': 'text',
  'id': 38,
  'label': 'どう',
  'x': -299.7619656,
  'y': -184.83308549999998},
 {'group': 'text',
  'id': 39,
  'label': 'ない.1',
  'x': -15.1875636,
  'y': -281.6449647},
 {'group': 'text',
  'id': 40,
  'label': 'ん',
  'x': -737.1383895,
  'y': -243.51702029999998},
 {'group': 'text', 'id': 41, 'label': 'ぬ', 'x': -522.5678037, 'y': 157.4174286},
 {'group': 'F', 'id': 42, 'x': -99.56297099999999, 'y': -366.83805060000003},
 {'group': 'P', 'id': 43, 'x': 163.3107966, 'y': -290.82249540000004},
 {'group': 'A', 'id': 44, 'x': 462.3349728, 'y': 265.3523901},
 {'group': 'P', 'id': 45, 'x': -694.2518949, 'y': 487.79786249999995},
 {'group': 'P', 'id': 46, 'x': 247.3747314, 'y': 356.52832079999996},
 {'group': 'P', 'id': 47, 'x': 272.6642808, 'y': 14.2640907},
 {'group': 'P', 'id': 48, 'x': 265.521969, 'y': -36.719564399999996},
 {'group': 'F', 'id': 49, 'x': -285.38550000000004, 'y': 95.298954},
 {'group': 'A', 'id': 50, 'x': -1.5065511, 'y': 217.9330701},
 {'group': 'F', 'id': 51, 'x': -158.45015279999998, 'y': 20.4187959},
 {'group': 'A', 'id': 52, 'x': 119.6779155, 'y': -109.4576364},
 {'group': 'P', 'id': 53, 'x': 315.6441768, 'y': 258.3883464},
 {'group': 'A', 'id': 54, 'x': -546.0147639, 'y': 110.74035780000001},
 {'group': 'P', 'id': 55, 'x': 132.64821809999998, 'y': 335.3565771},
 {'group': 'F', 'id': 56, 'x': -372.5291559, 'y': -38.1416988},
 {'group': 'A', 'id': 57, 'x': -328.4239734, 'y': 78.65439570000001},
 {'group': 'A', 'id': 58, 'x': 208.75645889999998, 'y': 87.0739287},
 {'group': 'F', 'id': 59, 'x': -48.1665135, 'y': -257.8323204},
 {'group': 'F', 'id': 60, 'x': -666.4161564, 'y': -39.2507946},
 {'group': 'F', 'id': 61, 'x': 121.9548321, 'y': -485.78184000000005},
 {'group': 'A', 'id': 62, 'x': 394.911267, 'y': 161.20668809999998},
 {'group': 'A', 'id': 63, 'x': 368.72377020000005, 'y': 654.0395271},
 {'group': 'P', 'id': 64, 'x': -156.43984890000002, 'y': -412.8922452},
 {'group': 'P', 'id': 65, 'x': 95.4721566, 'y': -237.32094899999998},
 {'group': 'F', 'id': 66, 'x': -979.7264361, 'y': 255.6592473},
 {'group': 'P', 'id': 67, 'x': -29.8540875, 'y': 372.0917964},
 {'group': 'F', 'id': 68, 'x': 286.4293749, 'y': -275.8799493},
 {'group': 'A', 'id': 69, 'x': -263.3393805, 'y': -203.3335749},
 {'group': 'P', 'id': 70, 'x': 226.1834529, 'y': 286.29546},
 {'group': 'F', 'id': 71, 'x': 194.0336574, 'y': 248.3846418},
 {'group': 'P', 'id': 72, 'x': -107.4700764, 'y': -245.4156744},
 {'group': 'F', 'id': 73, 'x': -659.6970729, 'y': -179.8313271},
 {'group': 'A', 'id': 74, 'x': -79.395387, 'y': -660.7625307000001},
 {'group': 'P', 'id': 75, 'x': 32.0493414, 'y': -306.3495585},
 {'group': 'A', 'id': 76, 'x': -122.3645391, 'y': 563.5042479},
 {'group': 'A', 'id': 77, 'x': 76.6149195, 'y': -63.9854217},
 {'group': 'P', 'id': 78, 'x': 153.487038, 'y': -19.6075416},
 {'group': 'A', 'id': 79, 'x': 136.3049766, 'y': -298.8030594},
 {'group': 'A', 'id': 80, 'x': 76.0768416, 'y': -332.9715573},
 {'group': 'A', 'id': 81, 'x': 274.3423029, 'y': -97.4453793},
 {'group': 'F', 'id': 82, 'x': 92.8973412, 'y': -382.2837948},
 {'group': 'F', 'id': 83, 'x': -354.67235969999996, 'y': 191.7953625},
 {'group': 'P', 'id': 84, 'x': -32.5602459, 'y': -71.7910701},
 {'group': 'A', 'id': 85, 'x': -391.888893, 'y': 692.3554908},
 {'group': 'F', 'id': 86, 'x': 131.584443, 'y': -170.4522372},
 {'group': 'A', 'id': 87, 'x': -178.5836079, 'y': -128.4894579},
 {'group': 'F', 'id': 88, 'x': -263.6015877, 'y': -341.1352611},
 {'group': 'A', 'id': 89, 'x': 88.699065, 'y': -145.70506260000002},
 {'group': 'F', 'id': 90, 'x': 58.2408345, 'y': 189.3382635},
 {'group': 'P', 'id': 91, 'x': 235.1845053, 'y': 311.7102801},
 {'group': 'P', 'id': 92, 'x': 34.2395745, 'y': -295.603164},
 {'group': 'F', 'id': 93, 'x': -440.3305275, 'y': 191.965305},
 {'color': '#01a860', 'group': 'idolF', 'id': 1042, 'label': '秋月律子'},
 {'color': '#e22b30', 'group': 'idolP', 'id': 1043, 'label': '天海春香'},
 {'color': '#fed552', 'group': 'idolA', 'id': 1044, 'label': '伊吹翼'},
 {'color': '#554171', 'group': 'idolP', 'id': 1045, 'label': 'エミリー'},
 {'color': '#ea5b76', 'group': 'idolP', 'id': 1046, 'label': '春日未来'},
 {'color': '#01adb9', 'group': 'idolP', 'id': 1047, 'label': '我那覇響'},
 {'color': '#515558', 'group': 'idolP', 'id': 1048, 'label': '菊地真'},
 {'color': '#2743d2', 'group': 'idolF', 'id': 1049, 'label': '如月千早'},
 {'color': '#6bb6b0', 'group': 'idolA', 'id': 1050, 'label': '北上麗花'},
 {'color': '#afa690', 'group': 'idolF', 'id': 1051, 'label': '北沢志保'},
 {'color': '#d1342c', 'group': 'idolA', 'id': 1052, 'label': '木下ひなた'},
 {'color': '#e9739b', 'group': 'idolP', 'id': 1053, 'label': '高坂海美'},
 {'color': '#274079', 'group': 'idolA', 'id': 1054, 'label': '桜守歌織'},
 {'color': '#58a6dc', 'group': 'idolP', 'id': 1055, 'label': '佐竹美奈子'},
 {'color': '#a6126a', 'group': 'idolF', 'id': 1056, 'label': '四条貴音'},
 {'color': '#b63b40', 'group': 'idolA', 'id': 1057, 'label': '篠宮可憐'},
 {'color': '#9bce92', 'group': 'idolA', 'id': 1058, 'label': '島原エレナ'},
 {'color': '#d7385f', 'group': 'idolF', 'id': 1059, 'label': 'ジュリア'},
 {'color': '#ebe1ff', 'group': 'idolF', 'id': 1060, 'label': '白石紬'},
 {'color': '#efb864', 'group': 'idolF', 'id': 1061, 'label': '周防桃子'},
 {'color': '#ee762e', 'group': 'idolA', 'id': 1062, 'label': '大神環'},
 {'color': '#f39939', 'group': 'idolA', 'id': 1063, 'label': '高槻やよい'},
 {'color': '#7f6575', 'group': 'idolP', 'id': 1064, 'label': '高山紗代子'},
 {'color': '#92cfbb', 'group': 'idolP', 'id': 1065, 'label': '田中琴葉'},
 {'color': '#bee3e3', 'group': 'idolF', 'id': 1066, 'label': '天空橋朋花'},
 {'color': '#5abfb7', 'group': 'idolP', 'id': 1067, 'label': '徳川まつり'},
 {'color': '#454341', 'group': 'idolF', 'id': 1068, 'label': '所恵美'},
 {'color': '#7278a8', 'group': 'idolA', 'id': 1069, 'label': '豊川風花'},
 {'color': '#f7e78e', 'group': 'idolP', 'id': 1070, 'label': '中谷育'},
 {'color': '#aeb49c', 'group': 'idolF', 'id': 1071, 'label': '永吉昴'},
 {'color': '#c7b83c', 'group': 'idolP', 'id': 1072, 'label': '七尾百合子'},
 {'color': '#f19557', 'group': 'idolF', 'id': 1073, 'label': '二階堂千鶴'},
 {'color': '#eb613f', 'group': 'idolA', 'id': 1074, 'label': '野々原茜'},
 {'color': '#d3dde9', 'group': 'idolP', 'id': 1075, 'label': '萩原雪歩'},
 {'color': '#ed90ba', 'group': 'idolA', 'id': 1076, 'label': '箱崎星梨花'},
 {'color': '#f1becb', 'group': 'idolA', 'id': 1077, 'label': '馬場このみ'},
 {'color': '#eceb70', 'group': 'idolP', 'id': 1078, 'label': '福田のり子'},
 {'color': '#ffe43f', 'group': 'idolA', 'id': 1079, 'label': '双海亜美'},
 {'color': '#ffe43f', 'group': 'idolA', 'id': 1080, 'label': '双海真美'},
 {'color': '#b4e04b', 'group': 'idolA', 'id': 1081, 'label': '星井美希'},
 {'color': '#e25a9b', 'group': 'idolF', 'id': 1082, 'label': '舞浜歩'},
 {'color': '#99b7dc', 'group': 'idolF', 'id': 1083, 'label': '真壁瑞希'},
 {'color': '#b54461', 'group': 'idolP', 'id': 1084, 'label': '松田亜利沙'},
 {'color': '#9238be', 'group': 'idolA', 'id': 1085, 'label': '三浦あずさ'},
 {'color': '#fd99e1', 'group': 'idolF', 'id': 1086, 'label': '水瀬伊織'},
 {'color': '#d7a96b', 'group': 'idolA', 'id': 1087, 'label': '宮尾美也'},
 {'color': '#6495cf', 'group': 'idolF', 'id': 1088, 'label': '最上静香'},
 {'color': '#7e6ca8', 'group': 'idolA', 'id': 1089, 'label': '望月杏奈'},
 {'color': '#f19591', 'group': 'idolF', 'id': 1090, 'label': '百瀬莉緒'},
 {'color': '#f5ad3b', 'group': 'idolP', 'id': 1091, 'label': '矢吹可奈'},
 {'color': '#788bc5', 'group': 'idolP', 'id': 1092, 'label': '横山奈緒'},
 {'color': '#fff03c', 'group': 'idolF', 'id': 1093, 'label': 'ロコ'}];

 const edges = [{'from': 1042, 'to': 42},
 {'from': 1043, 'to': 43},
 {'from': 1044, 'to': 44},
 {'from': 1045, 'to': 45},
 {'from': 1046, 'to': 46},
 {'from': 1047, 'to': 47},
 {'from': 1048, 'to': 48},
 {'from': 1049, 'to': 49},
 {'from': 1050, 'to': 50},
 {'from': 1051, 'to': 51},
 {'from': 1052, 'to': 52},
 {'from': 1053, 'to': 53},
 {'from': 1054, 'to': 54},
 {'from': 1055, 'to': 55},
 {'from': 1056, 'to': 56},
 {'from': 1057, 'to': 57},
 {'from': 1058, 'to': 58},
 {'from': 1059, 'to': 59},
 {'from': 1060, 'to': 60},
 {'from': 1061, 'to': 61},
 {'from': 1062, 'to': 62},
 {'from': 1063, 'to': 63},
 {'from': 1064, 'to': 64},
 {'from': 1065, 'to': 65},
 {'from': 1066, 'to': 66},
 {'from': 1067, 'to': 67},
 {'from': 1068, 'to': 68},
 {'from': 1069, 'to': 69},
 {'from': 1070, 'to': 70},
 {'from': 1071, 'to': 71},
 {'from': 1072, 'to': 72},
 {'from': 1073, 'to': 73},
 {'from': 1074, 'to': 74},
 {'from': 1075, 'to': 75},
 {'from': 1076, 'to': 76},
 {'from': 1077, 'to': 77},
 {'from': 1078, 'to': 78},
 {'from': 1079, 'to': 79},
 {'from': 1080, 'to': 80},
 {'from': 1081, 'to': 81},
 {'from': 1082, 'to': 82},
 {'from': 1083, 'to': 83},
 {'from': 1084, 'to': 84},
 {'from': 1085, 'to': 85},
 {'from': 1086, 'to': 86},
 {'from': 1087, 'to': 87},
 {'from': 1088, 'to': 88},
 {'from': 1089, 'to': 89},
 {'from': 1090, 'to': 90},
 {'from': 1091, 'to': 91},
 {'from': 1092, 'to': 92},
 {'from': 1093, 'to': 93}];

      // Instantiate our network object.
      var container = document.getElementById('network');
      var data = {
        nodes: nodes,
        edges:edges,
      };



      network = new vis.Network(container, data, options);

      network.on("doubleClick", function(properties) {
        if(!properties.nodes.length) return;
        const node = properties.nodes[0];
        const artist = nodes.find(item => item.id === node)
        console.log(JSON.stringify(artist));
        if (artist.url) window.open(artist.url, "_blank");

      });
    };


    
    function onChangeCheckbox(){
        const checkboxes = document.getElementsByName("checkbox");
        for (let i = 0; i < checkboxes.length; i++){
            const check_value = checkboxes[i].value;
            if (check_value in options.groups)
                options.groups[check_value]['hidden'] = !checkboxes[i].checked;
            const idol_type_label = 'idol' + check_value;
            if (idol_type_label in options.groups)
                options.groups['idol' + check_value]['hidden'] = !checkboxes[i].checked;
            if (check_value == 'label'){
                options.groups['idolP']['hidden'] = !checkboxes[i].checked;
                options.groups['idolF']['hidden'] = !checkboxes[i].checked;
                options.groups['idolA']['hidden'] = !checkboxes[i].checked;            }
            
        }
        console.log(options);
        network.setOptions(options);
        //network.destroy();
        draw();
        
    }

    </script>
  </body>
</html>